<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html><html xmlns="http://www.w3.org/1999/xhtml" lang="en">
  <head>
    <meta charset="utf-8"/>
    <title>数据 + 设计</title>
    <link rel="stylesheet" type="text/css" href="theme/html/html.css"/>
<script src="js/retina.min.js" type="text/javascript"> </script>
<script src="js/jquery.min.js" type="text/javascript"> </script>
<script src="js/data-design.js" type="text/javascript"> </script>
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  </head>
  <body data-type="book">
    <span class="btn open">Open</span>
    <div class="navbar">
      <div class="title">
        <span class="btn close">Close</span>
        <h1>Data + Design</h1>
        <h2>A simple introduction to preparing and visualizing information</h2>
      </div>
      <nav data-type="toc" id="idp1870176">
  <ol>
    <li data-type="part">
      <a href="titlepage01.html">简介</a>
      <ol>
        <li data-type="copyright-page">
          <a href="copyright-page01.html">版权许可</a>
        </li>
        <li data-type="preface">
          <a href="preface01.html">绪言</a>
        </li>
        <li data-type="foreword">
          <a href="foreword01.html">序</a>
        </li>
        <li data-type="introduction">
          <a href="introduction01.html">怎样使用本书</a>
        </li>
      </ol>
    </li>

    <li data-type="part">
      <a href="part01.html">数据基础</a>
      <ol>
        <li data-type="chapter">
          <a href="ch01.html">基本数据类型</a>
        </li>
        <li data-type="chapter">
          <a href="ch02.html">关于数据聚合/统计</a>
        </li>
      </ol>
    </li>

    <li data-type="part">
      <a href="part02.html">数据采集</a>
      <ol>
        <li data-type="chapter">
          <a href="ch03.html">调查数据简介</a>
        </li>

        <li data-type="chapter">
          <a href="ch04.html">调查问题类型</a>
        </li>

        <li data-type="chapter">
          <a href="ch05.html">其他的数据采集方法</a>
        </li>

        <li data-type="chapter">
          <a href="ch06.html">发现外部数据</a>
        </li>
      </ol>
    </li>

    <li data-type="part">
      <a href="part03.html">让数据就绪</a>
      <ol>
        <li data-type="chapter">
          <a href="ch07.html">数据准备</a>
        </li>

        <li data-type="chapter">
          <a href="ch08.html">数据清理</a>
        </li>

        <li data-type="chapter">
          <a href="ch09.html">数据校对种类</a>
        </li>

        <li data-type="chapter">
          <a href="ch10.html">数据清理的能和不能</a>
        </li>

        <li data-type="chapter">
          <a href="ch11.html">数据转换</a>
        </li>
      </ol>
    </li>

    <li data-type="part">
      <a href="part04.html">数据可视化</a>
      <ol>
        <li data-type="chapter">
          <a href="ch12.html">决定哪些以及多少数据用于呈现</a>
        </li>

        <li data-type="chapter">
          <a href="ch13.html">Graphing the Results of Checkbox Responses</a>
        </li>

        <li data-type="chapter">
          <a href="ch14.html">解析信息图</a>
        </li>

        <li data-type="chapter">
          <a href="ch15.html">色彩、字体、图标的重要性</a>
        </li>

        <li data-type="chapter">
          <a href="ch16.html">打印 Vs. 网页，静态 Vs. 交互</a>
        </li>
      </ol>
    </li>

    <li data-type="part">
      <a href="part05.html">不要做什么</a>
      <ol>
        <li data-type="chapter">
          <a href="ch17.html">知觉欺骗</a>
        </li>

        <li data-type="chapter"><a href="ch18.html">常见可视化错误</a>
        </li>
      </ol>
    </li>

    <li data-type="part">
      <a href="#">总结</a>
      <ol>
        <li data-type="chapter">
          <a href="app01.html">资源</a>
        </li>
        <li data-type="chapter">
          <a href="glossary01.html">术语表</a>
        </li>
        <li data-type="chapter">
          <a href="acknowledgments01.html">贡献者/致谢</a>
        </li>
      </ol>
    </li>
  </ol>
</nav>

    </div>
    <section class="yellow" data-type="chapter" data-pdf-bookmark="Chapter 29. Data Transformations" id="idp4148400">
<header>
  <div class="icon"><img src="images/sections/04/camera.png"/></div>
  <p>Chapter 11</p>
  <h1>Data Transformations</h1>
  <p data-type="author">By Kiran PV</p>
</header>

<section data-type="sect1" id="idp4134048">
<div data-type="warning">
  <p>This chapter covers more advanced statistical concepts than some of the others but we wanted to include a brief introduction to data transformations in case you encounter them. If you need to do your own transformation, check out the resources in our <a href="app01.html">Appendix</a> for additional tips.</p>
</div>

<p>When you take a digital photo, sometimes the picture comes out in a way that makes certain features hard to see. Maybe the colors are too dark or too light, the photo is blurry, or the objects in the image are too small and you want to zoom in on them. You can pop the photo into something like Instagram or Photoshop, tweak it, apply a filter or two, and transform the picture so it’s much clearer and easier to understand.</p>

<p>Sometimes we need to transform data, too. You might get a set of data where, if you visualize it as is, there will be parts that are difficult to see. Also, if you’re going to do statistical testing of your data, many common tests make specific assumptions about the distribution of the data (e.g. that the data are normally distributed). In the real world, we often come across data that don’t meet these assumptions. Data transformations are one way to handle both of these problems. Here, we’ll talk about some of the more common transformations so that when you encounter these terms in the future you’ll have an idea what was done to the data.</p>

<p><a class="glossterm" target="_blank" href="glossary01.html#transformation-data">Data transformations</a> are one of the common manipulation procedures which can reveal features hidden in the data that are not observable in their original form. We can transform the distribution of data to make it easier to see and so that any required assumptions of statistical tests are met. We usually do this by replacing one variable with a mathematical function operating on that variable. For example, you could replace a variable <em>x</em> by the logarithm of <em>x</em> or by square root of <em>x</em>.</p>

<div data-type="warning">
<p>Never perform the transform directly on your original data! Either create an additional column to hold the new values for each variable you’re transforming or make a copy of your entire dataset.</p>
</div>

<h2>Normal Distribution and Skewness in Data</h2>

<p>One of the most frequently-encountered assumptions of statistical tests is that data should be <a class="glossterm" target="_blank" href="glossary01.html#distribution-normal">normally distributed</a>. You may have heard of the normal distribution referred to as a “bell curve” before; this is because a normal distribution takes the shape of a bell, with the data spread around a central value. Some of the data examples that commonly follow a normal distribution are related to human measurements such as height, weight, life span, and scores on IQ tests.</p>

<p>Unlike a normal distribution, which is symmetric around the mean value, <a class="glossterm" target="_blank" href="glossary01.html#data-skewed">skewed data</a> tend to have more observations either to left side or to right side. Right skewed data have a long tail that extends to right whereas left skewed data will have a long tail extending to the left of the mean value. When data are <i>very</i> skewed, it can be hard to see the extreme values in a visualization. If you notice that your data distribution is skewed, you might consider transforming it if you’re doing statistical testing or if the data are difficult to visualize in their original state.</p>

<h3>Normal Distribution</h3>

<figure><img alt="Normal distribution" src="images/sections/04/normal-distribution.png"/></figure>

<h3>Left Skew</h3>

<figure><img alt="Left skew" src="images/sections/04/left-skew.png"/></figure>

<h3>Right Skew</h3>

<figure><img alt="Normal distribution" src="images/sections/04/right-skew.png"/></figure>

<h2>Understanding Transformations Using Sample Data</h2>

<p>Let’s use the population and land area of the 50 US states from 2012 to see how transformations work on actual data. The first step in transformation is to evaluate the distribution of the data. Then you can decide what transformation is appropriate (if one is needed). We can start by constructing a histogram of the population data and a scatterplot of the population-area data to get a better sense of how they’re distributed.</p>

<figure><img alt="Untransformed population values" src="images/sections/04/untransformed-population-values.png"/></figure>

<p>The histogram above shows that the distribution of population values is right skewed. This is reasonable to expect because the majority of states’ populations lie in the range of 1-10 million. If we want to do statistical testing that relies on a normal distribution assumption, these data will need to be transformed.</p>

<figure><img alt="Population scatter plot" src="images/sections/04/population-scatter.png"/></figure>

<p>In the scatter plot above, you can see that most of the data points are clustered in the bottom left corner of the graph, making it hard to see how population and land area are related. We can’t just scale the graph differently to “zoom in” on that corner because we’d knock California and Alaska off the chart. We can, however, use transformations to help make the data easier to view.</p>

<p>There are many transformation methods that can be applied in either of these situations, but let’s look at a couple of the common ones to see how they can affect both a visualization and the shape of a distribution.</p>

<h3>Log Transform</h3>

<p>To do a <a class="glossterm" target="_blank" href="glossary01.html#transformation-log">logarithmic transformation</a>, you calculate the log of each value in the dataset and use those transformed values rather than your raw data. Log transforms tend to have a major effect on distribution shape, and in visualizations can bring extreme outliers closer to the rest of the data so graphs aren’t stretched out as much. You can either use natural logs (<em>ln</em>) or logs with base 10. The graphs below show the histogram of population data after a natural log transformation is applied and what the scatterplot looks like if you use a natural log transformation on both the population and land area variables.</p>

<figure><img alt="Log transformed population values" src="images/sections/04/log-transformed.png"/></figure>

<figure><img alt="Log transformed scatter plot" src="images/sections/04/log-scatter.png"/></figure>

<h3>Square Root Transform</h3>

<p>The <a class="glossterm" target="_blank" href="glossary01.html#transformation-square">square root transformation</a> uses the square root of each value instead of the log, and has a more moderate effect on the distribution shape. The two graphs below show the histogram of population data and the scatterplot of population by land area, both after square root transformation is applied .</p>

<figure><img alt="Square root transformed population values" src="images/sections/04/square-root.png"/></figure>

<figure><img alt="Square root transformed population values" src="images/sections/04/sqrt-scatter.png"/></figure>

<h2>Choosing the Right Transform</h2>

<p>As you develop a better understanding of different transformation methods, you might wonder how to pick between them. The answer to this question is not straightforward and although there are formal statistical methods for selecting a transformation, we often need to use trial-and-error combined with knowledge of different transformations. A general strategy is to apply some of the most frequently used transforms such as log, square root, square, reciprocal, and cube root, and then choose the best one after observing the results.</p>

<p>Looking at the transformed histograms above, the log transformed data seems to be a better fit to the normal distribution while the square root transformed data still carries the right skew. In this example, if you’re doing a statistical test that has assumes the data are normally distributed, the log transformation would be a better method to use than the square root transformation.</p>

<p>On the other hand, if your primary purpose in the example above is to visualize the relationship between state population and land area, the square root transformation does a better job of spreading out the data and making it easier to view than the log transformation.</p>

<h2>Common Transformations</h2>

<table>
	<tbody>
		<tr>
			<th>Method</th>
			<th>Math Operation</th>
			<th>Good for:</th>
			<th>Bad for:</th>
		</tr>
		<tr>
			<td>Log</td>
			<td>ln(x)<br/>
			log<sub>10</sub>(x)</td>
			<td>Right skewed data<br/>
			log<sub>10</sub>(x) is especially good at handling higher order powers of 10 (e.g. 1000, 100000)</td>
			<td>Zero values<br/>
			Negative values</td>
		</tr>
		<tr>
			<td>Square root</td>
			<td>√<span style="text-decoration:overline;">x</span></td>
			<td>Right skewed data</td>
			<td>Negative values</td>
		</tr>
		<tr>
			<td>Square</td>
			<td>x<sup>2</sup></td>
			<td>Left skewed data</td>
			<td>Negative values</td>
		</tr>
		<tr>
			<td>Cube root</td>
			<td>x<sup>1/3</sup></td>
			<td>Right skewed data<br/>
			Negative values</td>
			<td>Not as effective at normalizing as log transform</td>
		</tr>
		<tr>
			<td>Reciprocal</td>
			<td>1/x</td>
			<td>Making small values bigger and big values smaller</td>
			<td>Zero values<br/>
			Negative values</td>
		</tr>
	</tbody>
</table>

<h2>Caveats about Transformation</h2>

<p>Since data transformation methods involve the application of a mathematical function to your data, you need to be careful when reporting or interpreting any insights derived from the transformed data because a transformation changes the unit of the data. For example, when we apply a logarithmic function to a population variable, the unit of measurement becomes the log of the population. When you’re sharing results, your audience may assume that the calculated numbers or visualizations they’re seeing are based on raw data, so if the values have been transformed, you should clearly communicate what transformation was used, as well as what units the data are being displayed in.</p>

<div data-type="warning">
<p>If you use transformed data to calculate statistical values like means, you should back-transform the final results and report them in their original units. To back-transform, you just do the <i>opposite</i> of the mathematical function you used in the first place. For example, if you did a square root transformation, you would <a class="glossterm" target="_blank" href="glossary01.html#transformation-back">back-</a><a class="glossterm" target="_blank" href="glossary01.html#transformation-back">transform</a> by squaring your end result.</p>
</div>

<p>You may not see transforms every day, but when you do, it’s helpful to know why they were used and how they affect your data. It’s important to be able to see different parts of the picture when working with data, and transformations give you another tool to help you do just that!</p>
</section>
</section>
    <div class="navigation">
      <ul>
        <li id="next_page"><a href="part04.html">Next</a></li>
        <li id="previous_page"><a href="ch10.html">Previous</a></li>
      </ul>
    </div>
  </body>
</html>
